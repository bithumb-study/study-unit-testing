# 11. 단위 테스트 안티 패턴 

## 11.1 비공개 메서드 단위 테스트 
비공개 메서드 테스트 ->  하면 안됨 

### 11.1.1 비공개 메서드와 테스트 취약성 
- 단위 테스트를 위해 비공개 메서드를 노출하는 것은 옳지 않음
  - 규칙 위반 : 식별할 수 있는 동작만 테스트
  - 리팩토링 내성 하락 : 테스트가 구현 세부 사항과 결합
- 포괄적인 식별할 수 있는 동작으로서 간접적으로 테스트해야 함 

### 11.1.2 비공개 메서드와 불필요한 커버리지 
- 비공개 메서드가 너무 복잡해진 경우
  - (식별할 수 있는 동작에 합리적인 테스트 커버리지가 있다고 가정할 경우) 죽은 코드 
  - 별도의 클래스로 도출해야 하는 추상화가 누락됐다는 징후

### 11.1.3 비공개 메서드 테스트가 타당한 경우 
- 책 본문 내용은 잘 모르겠지만 java 테스트 라이브러리 중 `PowerMock` 을 사용하면 private 메서드를 테스트 할 수 있음 


## 11.2 비공개 상태 노출
- 테스트 유의성을 위해 공개 API 노출 영역을 넓히면 안됨  


## 11.3 테스트로 유출된 도메인 지식 
- 보통 복잡한 알고리즘을 테스트할때 발생하는 안티패턴 
- 테스트 작성 시 특정 구현을 암시하지 말 것 ( = 제폼 코드를 Ctrl c+v 금지)


## 11.4 코드 오염 
- 코드 오염 = 테스트에만 필요한 제품 코드를 추가하는 것 


## 11.5 구체 클래스를 mock 으로 처리하기
- 참고 : 험블 객체 디자인 패턴
- 기능을 지키려고 구체 클래스를 mock 으로 처리해야 한다면 => 단일 책임 원칙을 위반
  - 도메인 로직인 있는 클래스와 프로세스 외부 의존성과 통히나는 클래스로 분리 


## 11.6 시간 처리하기 
- 서비스나 일반 값의 명시적인 의존성을 시간으로 주입할 것 
